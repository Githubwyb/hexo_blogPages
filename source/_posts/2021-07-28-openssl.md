---
title: openssl学习记录
date: 2021-07-28 11:42:59
tags: [网络]
categories: [Program, C/C++]
---

# 一、前言

```
PS D:\work\src\local\cpp\openssl\1.1.1> .\apps\openssl.exe
OpenSSL> version
OpenSSL 1.1.1k  25 Mar 2021
```

## 1. 证书格式解析

## 2. ssl协议解析

# 二、命令

## 1. 证书

### 1.1. 颁发证书

### 1.2. 证书转换

**p12转其他**

```shell
# pem
# 证书的p12，需要输入密码
openssl pkcs12 -clcerts -nokeys -in cert.p12 -out cert.pem
```

**cer转其他**

```shell
# pem
openssl x509 -inform der -in demo.cer -out demo.pem
```

**pem转其他**

```shell
# cer
openssl x509 -outform der -in demo.pem -out demo.cer
```

### 1.3. 验证证书



## 2. 客户端 `openssl s_client`

### 2.1. 选项

- `-engine <name>`: 使用引擎，给一些使用硬件加密的代码使用
- `-ssl_client_engine <name>`: 使用引擎给客户端需要证书操作时
- `-connect <ip:port>`: 连接地址，仅支持ip+端口，不支持url
- `-msg`: 显示协议相关的消息体
- `-state`: 显示当前ssl的阶段
- `-debug`: 额外显示一些输出
- `-tls1_1`: 使用tlsv1.1进行通信

## 3. 服务端 `openssl s_server`

# 三、openssl库

# 踩坑记
