---
title: kali linux防学习
date: 2021-03-22 23:03:51
tags: [Linux]
categories: [Program, Shell]
---

# 一、被动信息收集

## 1. dns域名解析信息收集

### 1.1. dns域名解析原理

**域名服务器**

- dns服务器分为根域dns服务器和顶级域名服务器
- 根域dns服务器一般有13个，储存了所有顶级域名服务器的地址
- 顶级域名服务器储存了每位客户所注册的主机地址

**域名记录**

- A: 正向解析，一个域名对应一个IP地址
- Cname: 别名，允许多个域名对应一个主机
- NS: 域名服务器记录，用于指定该域名由那个域名服务器解析
- MX: 邮件交换记录，通过`@xxx.xxx`来对应邮件服务器
- PTR: 反向解析，通过IP查域名，记录保存在`in-addr.arpa`域中

**dns缓存服务器**

- 不负责解析，只用来缓存结果

**dns域名解析过程**

<img src = "2021-03-22-01.png">

### 1.2. dns解析命令

1. ping
2. nslookup
3. dig

**nslookup**

```shell

```

# 三、wireShark使用

## 2. 抓包技巧

### 2.1. 过滤器使用

**一些基本使用**

```shell
###### 过滤ip ######
# 所有ip
ip.addr == 1.1.1.1
# 目标和来源
ip.src_host == 1.1.1.1
ip.dst_host == 1.1.1.1

###### 协议 ######
# 协议直接打协议名，tcp/udp/icmp/arp/http等
tcp

###### 逻辑 ######
# 与和或
ip.src_host == 1.1.1.1 or ip.dst_host == 1.1.1.1
ip.src_host == 1.1.1.1 and ip.dst_host == 1.1.1.1

```

# 四、nmap高级使用技巧

## 1. namp

### 1.1. 选项

- `-v`: 显示详细信息
- `-p <port>`: 指定端口范围，例：`1-100,135,199,1234`
- `-O`: 显示操作系统类型
- `-A`: 对操作系统和软件版本号进行探测，并进行traceroute路由探测
- `-T<0-5>`: 扫描过程中使用的时序，级别越高扫描速度越快，但容易被防火墙或IDS检测屏蔽，推荐使用T4
- `--randomize-host`: 对目标主机顺序随机划分
- `--scan-delay <time>`: 探针之间的延迟，单位s，可以指定，例：`3000ms`
- `-F`: 快速模式
- `--version-light`: 设定侦测等级为2

**扫描类型**

- `-sS`: TCP同步扫描（SYN），半开扫描，只发送sync包，如果回了syn|ack就说明端口开放
- `-sn`: ping扫描
- `-sV`: 探测端口及服务版本信息

### 1.2. 实例

```shell
# 扫描网段
=> nmap -sS -O 192.168.1.0/24
=> nmap -sS -O 1.*.2.3-8
# 扫描单个ip
=> nmap -sS -O 192.168.1.1
# 扫描域名
=> nmap -sS -O www.baidu.com
```
