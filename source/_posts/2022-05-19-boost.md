---
title: boost库使用记录
date: 2022-05-19 15:56:20
tags:
categories: [Program, C/C++]
---

# 一、前言

## 1. cmake使用

```cmake
set(Boost_USE_STATIC_LIBS ON)
# 1.70: 指定boost库最低版本1.70，可以不加
# REQUIRED: 必须找到，不然报错
# COMPONENTS: 找到filesystem和system两个模块，模块路径会加到Boost_LIBRARIES变量中，不加模块此变量为空
find_package(Boost 1.70 REQUIRED
	COMPONENTS filesystem system
)

# 头文件必须加，否则会找不到
target_include_directories(${BIN_NAME} PRIVATE
    # 第三方库头文件
    ${Boost_INCLUDE_DIR}
)

target_link_libraries(
    ${BIN_NAME} PRIVATE
    # 第三方库
    ${Boost_LIBRARIES}
)
```

# 二、使用实例

## 1. boost/filesystem/path.hpp

### 1.1. 路径字符串操作

```cpp
#include <boost/filesystem/path.hpp>

int main(int argC, char *argV[]) {
    std::string test = "C:\\ww\\asdf asdf\\aaa.txt";
    boost::filesystem::path p(test);
    LOG_INFO("{}", p.filename().string());      // aaa.txt
    return 0;
}
```

## 2. boost/format.hpp

### 2.1. 拼接变量到字符串

```cpp
#include <boost/format.hpp>

static std::string to_string(const RunLoopCB& cb) {
    const char *jsonFormat = R"({"fileName":"%1%","callThead":"%2%","calleeName":"%3%","funcName":"%4%","calleeLineNum":%5%})";
    boost::format fmt = boost::format(jsonFormat)
        % cb.fileName
        % cb.callTid
        % cb.calleeName
        % cb.funcName
        % cb.calleeLineNum;
    return fmt.str();
}
```
