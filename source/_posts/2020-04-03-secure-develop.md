---
title: 安全编码专项笔记
date: 2020-04-03 16:32:58
tags: [工程开发]
categories: [Program, Common]
---

本帖主要记录安全编码需要注意的一些东西，后续可能补充一些案例

# 一、注意项

## 1. 设计相关

### 1.1. 外部接口考虑暴力破解或者枚举

外部调用的请求之类的接口，要注意鉴权方式。考虑有没有可能通过枚举暴力破解的方式，扫描出一些敏感信息。

### 1.2. 用户名权限等篡改

接口设计如果有外部输入用户名权限等信息，如果鉴权不够强，可能导致修改绑定的用户名，从而导致数据泄露和权限泄漏

### 1.3. 服务开放

所有新增服务需要考虑按需开放，如果没有使用或者配置没有开启，就不要让服务运行，并且把端口用防火墙关闭

## 2. 编码相关

- 外部输入需要考虑大小问题，是否可能越界
- 外部输入是否可能存在特殊字符
- sql注入
- xml注入

# 二、威胁应对参考设计方案

## 1. 枚举暴力破解

接口校验参数格式固定，有可能被暴力循环扫描来枚举出信息，可参考以下方案解决

1. 必须在线用户可发请求到接口，session机制
2. 数据整体使用特殊算法生成一个hashid，服务端校验hashid对上才处理数据
3. ip防爆破检测
4. 前端加ddos防攻击设备

## 2. 用户名权限等篡改

接口有外部输入用户名权限等数据时，可能出现被篡改数据，可参考以下方案解决

1. 用户名除了登录时需要外部输入进行校验，其余放入在线信息中，外部通过session关联链接，从其中获取用户名和权限，不从外部输入
2. 内部接口则限制ip仅为`127.0.0.1`
